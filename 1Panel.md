


          
您提供的这份部署指南非常专业和全面，它涵盖了使用 1Panel 面板在京东云服务器上部署网站的完整流程。

针对我们这个 **Node.js** 项目（PigFriends），我可以将这份通用指南具体化，为您提供一份量身定制的部署步骤。

### 在 1Panel 上部署 PigFriends 项目的详细步骤

---

#### 1. 服务器准备阶段

*   **登录 1Panel**：确保您已经成功登录到京东云服务器的 1Panel 管理后台。
*   **创建运行环境**：
    1.  在 1Panel 左侧菜单栏找到「应用商店」。
    2.  在应用商店中，搜索并安装 **Node.js**。选择一个较新的稳定版本即可（例如 v18.x 或 v20.x）。

#### 2. 网站文件上传

*   **创建网站目录**：
    1.  在 1Panel 中，进入「网站」-> 「网站」，点击「创建网站」。
    2.  选择「运行时」，然后点击「创建运行时网站」。
    3.  **名称**：自定义，例如 `pig-friends`。
    4.  **运行环境**：选择您刚刚安装的 **Node.js** 版本。
    5.  **主目录**：1Panel 会自动为您创建一个目录，例如 `/opt/apps/pig-friends/pig-friends`。**请记下这个路径**。
*   **上传文件**：
    1.  进入「文件」菜单，导航到您刚刚创建的主目录。
    2.  使用 1Panel 的文件管理器，将您本地的 `PigFriends` 项目所有文件（除了 `node_modules` 文件夹）上传到该目录。
    3.  **重点**：确保 `package.json`, `server/server.js` 等文件都在这个主目录下。

#### 3. 网站配置与依赖安装

*   **配置启动命令**：
    1.  回到「网站」->「网站」，找到您创建的 `pig-friends` 网站，点击「配置」。
    2.  在配置页面中，找到「启动服务」或类似的设置。
    3.  **启动命令**：填写 `npm start`。
    4.  **端口**：填写 `3000`。这是您在 <mcfile name="server.js" path="/Users/gzy/mycode/PigFriends/server/server.js"></mcfile> 中指定的端口。
*   **安装依赖**：
    1.  在配置页面，找到「终端」或「命令行」功能。
    2.  进入终端后，系统会自动定位到项目主目录。
    3.  执行 `npm install` 命令来安装所有依赖。这个过程可能需要几分钟。
*   **保存并启动**：
    1.  依赖安装完成后，保存您的网站配置。
    2.  1Panel 会自动（或需要您手动点击启动）根据您的配置运行 `npm start` 命令，并监听 3000 端口。

#### 4. 反向代理与域名配置

您的 Node.js 应用运行在 `3000` 端口，但用户通常希望通过标准的 80 (HTTP) 或 443 (HTTPS) 端口访问网站。1Panel 可以通过 Nginx 轻松实现这一点。

1.  **创建代理站点**：
    *   回到「网站」->「网站」，再次点击「创建网站」。
    *   这次选择「反向代理」。
2.  **填写配置**：
    *   **主域名**：填写您准备使用的域名，例如 `pig.yourdomain.com`。
    *   **代理地址**：填写 `http://127.0.0.1:3000`。这告诉 Nginx 将来自外部的请求转发到本地的 3000 端口（也就是您的 Node.js 应用）。
3.  **配置 SSL (HTTPS)**：
    *   在反向代理网站的配置中，找到「SSL」或「证书」选项。
    *   您可以使用 1Panel 的功能免费申请并自动续签 Let's Encrypt 证书，让您的网站更安全。

#### 5. 域名解析与最终测试

1.  **解析域名**：
    *   登录您的域名服务商（如阿里云、腾讯云 DNSPod 等）。
    *   添加一条 `A` 记录，将您的域名（例如 `pig.yourdomain.com`）解析到您的京东云服务器的公网 IP 地址。
2.  **测试访问**：
    *   等待几分钟让 DNS 解析生效。
    *   在浏览器中直接访问您的域名 `https://pig.yourdomain.com`。

如果一切顺利，您现在应该能看到 PigFriends 网站的首页了！

### 总结

使用 1Panel 部署 Node.js 项目的核心思路是：

1.  **创建运行时网站**：用于管理 Node.js 应用本身（安装依赖、启动服务）。
2.  **创建反向代理网站**：用于将用户的访问请求（通过域名）安全、高效地转发给 Node.js 应用。

这个流程利用了 1Panel 的可视化界面，极大地简化了传统需要手动配置 Nginx 和进程守护（如 PM2）的复杂过程。祝您部署顺利！
        